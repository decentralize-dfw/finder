<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hatch Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Helvetica", monospace;
        }

        body {
            background-color: transparent;
            overflow: hidden;
            color: #000;
            margin: 0;
            padding: 0;
        }

        .container {
            display: flex;
            flex-direction: column;
            width: 100vw;
            height: 800px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        .top-section {
            height: auto;
            width: 100%;
            display: flex;
            flex-direction: column;
            padding: 15px;
            background-color: transparent;
            z-index: 10;
            position: absolute;
            top: 0;
            left: 0;
            gap: 10px;
        }

        .top-controls {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            width: 500px;
            gap: 10px;
        }

        .menu-btn-container {
            z-index: 6;
            height: 32px;
            display: flex;
            gap: 8px;
            width: 500px;
            padding: 0;
        }

        .fullscreen-row {
            display: flex;
            width: 500px;
            padding: 0;
            margin-top: 0px;
        }

        .fullscreen-container {
            z-index: 6;
            width: 100%;
        }

        .menu-btn, .fullscreen-btn {
            padding: 5px 4px;
            border: 1px solid rgba(0, 0, 0, 0.2);
            border-radius: 4px;
            background-color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            font-size: 9px;
            transition: all 0.2s;
            color: #000;
            box-shadow: none;
            text-shadow: none;
            line-height: 20px;
            flex: 1;
            outline: none;
            letter-spacing: 0px;
        }

        .menu-btn {
            font-style: italic;
            font-weight: bold;
            letter-spacing: 0.1px;
            height: 32px;
        }

        .fullscreen-btn {
            font-weight: bolder;
            background-color: rgba(240, 240, 240, 0.9);
            height: 30px;
            width: 500px;
            padding: 5px 0;
            line-height: 20px;
            flex: none;
        }

        .menu-btn:hover, .fullscreen-btn:hover {
            background-color: rgba(240, 240, 240, 0.9);
        }

        .menu-btn.active {
            background-color: rgba(100, 100, 100, 0.8);
            color: white;
        }

        .viewer-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            height: 800px;
            z-index: 1;
            overflow: hidden;
            pointer-events: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            background: transparent;
            opacity: 1;
        }

        .viewer-content {
            width: 100%;
            height: 100%;
            pointer-events: auto;
            position: absolute;
            top: 0;
            left: 0;
            overflow: hidden;
            opacity: 1;
        }

        .viewer-container.active {
            pointer-events: auto;
            z-index: 1;
        }

        .media-details {
            position: absolute;
            padding: 0;
            max-height: 80vh;
            overflow: hidden;
            z-index: 4;
            color: #000;
            background-color: transparent;
            width: 500px;
            display: flex;
            flex-direction: column;
            margin: 0;
            left: 15px;
            top: 50px;
            box-sizing: border-box;
        }

        .details-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            width: 100%;
            padding: 0;
        }

        .compact-info {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
            align-items: center;
            width: 100%;
            padding: 0;
        }

        .info-pill {
            background-color: rgba(255, 255, 255, 0.4);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 9px;
            white-space: nowrap;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .description-text {
            font-size: 10px;
            font-weight: bold;
            line-height: 1.5;
            text-align: left;
            margin-bottom: 10px;
            letter-spacing: -0.2px;
            width: 100%;
            padding: 0;
        }

        .control-row {
            display: flex;
            width: 100%;
            gap: 14px;
            margin-bottom: 10px;
            align-items: center;
            padding: 0;
        }

        .action-btn {
            padding: 8px 0;
            border: 1px solid rgba(0, 0, 0, 0.2);
            border-radius: 4px;
            background-color: rgba(255, 255, 255, 0.5);
            color: #000;
            cursor: pointer;
            font-size: 9px;
            transition: all 0.2s;
            text-align: center;
            flex: 1;
            box-sizing: border-box;
        }

        .action-btn:hover {
            background-color: rgba(220, 220, 220, 0.9);
        }

        .bottom-section {
            position: absolute;
            left: 0;
            right: 0;
            height: 80px;
            z-index: 5;
            text-align: center;
            bottom: 0;
            display: none;
        }

        .media-selector {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .media-carousel {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            width: 100%;
            height: 100%;
        }

        .media-item {
            width: 80px;
            height: 80px;
            position: absolute;
            transform-origin: center;
            transition: all 0.3s ease;
            opacity: 0.7;
            z-index: 1;
            margin: 0;
            padding: 0;
            cursor: pointer;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }

        .media-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            background-color: #fff;
            margin-bottom: 0;
        }

        .media-item.active .media-thumbnail {
            border-color: rgba(0, 120, 255, 0.8);
            box-shadow: 0 0 10px rgba(0, 120, 255, 0.5);
            opacity: 1;
        }

        .media-item-name {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(255, 255, 255, 0.8);
            color: #000;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 50;
            opacity: 0;
            font-weight: normal;
        }

        .media-item:hover .media-item-name {
            opacity: 1;
        }

        .media-preview {
            width: 60%;
            height: 80%;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background: transparent;
            position: relative;
        }

        .media-video-container {
            top: 50px;
            width: 70%;
            height: 70%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: transparent;
            position: relative;
        }

        .media-video {
            height: 70%;
            width: 70%; /* Square aspect ratio */
            max-width: 70%;
            max-height: 70%;
            object-fit: contain;
            background: transparent !important;
            aspect-ratio: 1/1; /* Ensure square aspect ratio */
        }

        .youtube-iframe {
            max-width: 100%;
            max-height: 100%;
            width: 70%;
            height: 70%;
            object-fit: contain;
            border: none;
        }

        .recording-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container.fullscreen-mode {
            height: 100vh !important;
            max-height: 100vh !important;
            width: 100vw !important;
        }

        .fullscreen-mode .viewer-container {
            height: 100vh !important;
        }

        .fullscreen-mode .top-section,
        .fullscreen-mode .bottom-section {
            display: none !important;
        }

        .fullscreen-mode .youtube-iframe {
            width: 80%;
            height: 80%;
        }

        /* Text Box Styling */
        .text-box {
            position: absolute;
            left: 15px;
            bottom: 50px;
            top: 57px; /* 32px (button height) + 15px (padding) + 10px (extra spacing) */
            width: 500px;
            max-height: 700px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            padding: 5px;
            overflow-y: auto;
            z-index: 4;
        }

        /* Custom Scrollbar */
        .text-box::-webkit-scrollbar {
            width: 3px;
        }

        .text-box::-webkit-scrollbar-track {
            background: transparent;
            margin-right: 2px;
        }

        .text-box::-webkit-scrollbar-thumb {
            background: #808080; /* Gray color */
            border-radius: 4px;
        }

        /* Text Formatting */
        .text-content {
            padding: 5px;
        }

        .text-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .text-subtitle {
            font-size: 14px;
            font-style: italic;
            margin-bottom: 10px;
        }

        .text-body {
            font-size: 11px;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .text-italic {
            font-style: italic;
        }

        /* Speaker Icon Styling */
        .speaker-icon {
            position: absolute;
            top: 415px;
            right: %50;
            width: 24px;
            height: 24px;
            cursor: pointer;
            z-index: 5;
            fill: white; /* White color */
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-section" id="top-section">
            <div class="top-controls">
                <div class="menu-btn-container">
                    <button class="menu-btn active" id="info-btn">Info</button>
                    <button class="menu-btn" id="experience-btn">Experience Now</button>
                    <button class="menu-btn" id="recording-btn">Recording</button>
                    <button class="menu-btn" id="media-btn">Media</button>
                </div>
                <div class="fullscreen-row" id="fullscreen-row" style="display: none;">
                    <div class="fullscreen-container">
                        <button class="fullscreen-btn" id="fullscreen-btn">Fullscreen</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="viewer-container" id="viewer-container">
            <div class="viewer-content" id="viewer-content"></div>
            <div class="media-details" id="media-details">
                <div class="details-title" id="media-title"></div>
                <div class="details-info" id="details-info"></div>
                <div class="control-row">
                    <button class="action-btn" id="mint-btn">Mint</button>
                </div>
                <div class="description-text" id="description-text"></div>
            </div>
            <div class="text-box" id="text-box">
                <div class="text-content">
                    <div class="text-title">HATCH, VIRTUAL THEATER NO:3, 07.24</div>
                    <div class="text-subtitle text-italic">In a nihilistic virtual setup, two digital beings and an external entity explore existence, freedom, and control. Their journey leads them to question the nature of their reality and dimensions, uncovering deeper truths that challenge their roles. The external entity faces a pivotal choice that could redefine their understanding of existence.</div>
                    <div class="text-body">"Hatch" represents an innovative intersection of theater and technology, realized through WebXR. This 27-minute immersive experience unfolds in a metaverse environment where audiences participate either through VR headsets with complete freedom of movement or via computer with access to 32 distinct camera angles. The technical architecture employs 50 smart objects that dynamically load and unload, maintaining an efficient 10-15 MB data usage, making it accessible across various devices.</div>
                    <div class="text-body">The experience is uniquely positioned in current digital culture, addressing the evolving relationship between human consciousness and artificial intelligence. Rather than presenting a dystopian narrative of AI dominance, it explores the current power dynamic where humans hold authority over digital entities, raising questions about ethical responsibility and empathy in these interactions.</div>
                    <div class="text-body">Audience members become active participants rather than passive viewers, with their avatars physically present within the virtual space. This direct involvement creates a meta-theatrical layer where viewers simultaneously observe and participate in the unfolding narrative. The experience adapts to each viewer's presence, acknowledging them as both audience and performer, creating a unique dynamic where the observer becomes an integral part of the observed system.</div>
                    <div class="text-body">The narrative structure deliberately plays with temporal dimensions, offering multiple viewing variations after the initial experience. Through horizontal, reverse, and circular, the same core story transforms into distinct experiences, each offering new perspectives on the relationship between digital entities and human consciousness. This temporal manipulation echoes concepts from quantum mechanics, particularly Schrödinger's thought experiments, suggesting that digital entities might exist differently when not being observed.</div>
                    <div class="text-body">A key philosophical thread explores the authenticity of digital experiences and consciousness. The work questions whether programmed responses can evolve into genuine emotions, comparing current AI limitations with potential future developments. It deliberately maintains ambiguity about whether digital entities truly "feel" or simply simulate emotions for effective interaction, mirroring contemporary debates about AI consciousness and ethical obligations.</div>
                    <div class="text-body">The experience balances philosophical depth with accessible storytelling, employing contemporary pacing that reflects modern media consumption patterns while engaging with complex themes. This approach makes sophisticated concepts about transhumanist existentialism approachable without oversimplification, creating multiple layers of engagement for different audience members.</div>
                    <div class="text-body">"Hatch" positions itself as a bridge between current technological capabilities and future possibilities in digital theater. It acknowledges present limitations while suggesting potential developments in how we might experience and interact with digital narratives. The work raises questions about the nature of consciousness, the authenticity of digital experiences, and the ethical implications of creating self-aware digital entities.</div>
                    <div class="text-body">The experience concludes with intentional ambiguity, leaving audiences to contemplate their role in digital ecosystems and their ethical responsibilities toward artificial consciousness. This open-ended approach encourages ongoing discussion about the evolution of human-AI relationships and the nature of consciousness itself.</div>
                    <div class="text-body">In the context of contemporary digital art and theater, "Hatch" contributes to discussions about the future of performance art in virtual spaces. It explores how traditional theatrical elements can be transformed and enhanced through digital mediums while maintaining emotional resonance and narrative depth. The work suggests possibilities for new forms of artistic expression that emerge from the intersection of traditional storytelling and emerging technologies.</div>
                    <div class="text-body">The project's relationship with blockchain technology through NFT minting of screen recordings, actors, and even creating the whole experience on a Hyperfy WebXr Metaverse adds another layer of permanence and authenticity to the digital experience while also raising questions about ownership and preservation of digital performance art. This technological framework positions the work within current discussions about digital art ownership while looking forward to future developments in how we preserve and share digital theatrical experiences.</div>
                </div>
            </div>
        </div>

        <div class="bottom-section" id="bottom-section">
            <div class="media-selector">
                <div class="media-carousel" id="media-carousel"></div>
            </div>
        </div>
    </div>

    <script>
        const CONFIG = {
            thumbnails: { size: 80, spacing: 40, minSideOffset: 40 },
            ui: { detailsBox: { top: 220, left: 15, width: 500 } },
            viewer: { top: 0, left: 0, right: 0, bottom: 0, height: 800 }
        };

        let mediaData = [], activeMediaIndex = 0, activeMode = 'info';

        document.addEventListener('DOMContentLoaded', () => {
            applyUIConfiguration();
            initApp();
        });

        function applyUIConfiguration() {
            const viewerContainer = document.getElementById('viewer-container');
            viewerContainer.style.top = `${CONFIG.viewer.top}px`;
            viewerContainer.style.left = `${CONFIG.viewer.left}px`;
            viewerContainer.style.right = `${CONFIG.viewer.right}px`;
            viewerContainer.style.height = `${CONFIG.viewer.height}px`;

            const mediaDetails = document.getElementById('media-details');
            mediaDetails.style.top = `${CONFIG.ui.detailsBox.top}px`;
            mediaDetails.style.left = `${CONFIG.ui.detailsBox.left}px`;
            mediaDetails.style.width = `${CONFIG.ui.detailsBox.width}px`;

            const bottomSection = document.getElementById('bottom-section');
            bottomSection.style.bottom = '0px';
        }

        function initApp() {
            loadMediaData();
            setupEventListeners();
            resetViewer();
            showInfo();
            updateMenuButtons();
        }

        function setupEventListeners() {
            document.getElementById('info-btn').addEventListener('click', showInfo);
            document.getElementById('experience-btn').addEventListener('click', showExperience);
            document.getElementById('recording-btn').addEventListener('click', showRecording);
            document.getElementById('media-btn').addEventListener('click', showMedia);

            document.getElementById('fullscreen-btn').addEventListener('click', toggleFullscreen);
            document.getElementById('mint-btn').addEventListener('click', () => {
                if (mediaData[activeMediaIndex]?.buyLink) {
                    toggleFullscreen();
                    window.open(mediaData[activeMediaIndex].buyLink, '_blank');
                }
            });

            document.querySelector('.media-selector').addEventListener('wheel', e => {
                e.preventDefault();
                if (activeMode === 'media') {
                    const scrollDirection = e.deltaY > 0 ? 1 : -1;
                    changeActiveMedia(scrollDirection);
                }
            }, { passive: false });

            document.addEventListener('keydown', e => {
                if (e.key === 'Escape' && document.fullscreenElement) {
                    document.exitFullscreen();
                }
            });

            document.addEventListener('fullscreenchange', () => {
                const container = document.querySelector('.container');
                if (document.fullscreenElement) {
                    container.classList.add('fullscreen-mode');
                } else {
                    container.classList.remove('fullscreen-mode');
                }
            });
        }

        function toggleFullscreen() {
            const container = document.querySelector('.container');
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen()
                    .then(() => {
                        container.classList.add('fullscreen-mode');
                        if (activeMode === 'experience') {
                            const iframe = document.querySelector('.viewer-content iframe');
                            if (iframe) {
                                iframe.style.height = '100vh';
                                iframe.style.width = '100vw';
                            }
                        }
                    })
                    .catch(err => console.error('Fullscreen error:', err));
            } else {
                document.exitFullscreen()
                    .then(() => {
                        container.classList.remove('fullscreen-mode');
                        if (activeMode === 'experience') {
                            const iframe = document.querySelector('.viewer-content iframe');
                            if (iframe) {
                                iframe.style.height = '800px';
                                iframe.style.width = '100%';
                            }
                        }
                    })
                    .catch(err => console.error('Exit fullscreen error:', err));
            }
        }

        function resetViewer() {
            const viewerContent = document.getElementById('viewer-content');
            viewerContent.innerHTML = '';
            viewerContent.style.opacity = '1';
            document.getElementById('viewer-container').style.opacity = '1';
            document.getElementById('media-details').style.display = 'none';
            document.getElementById('bottom-section').style.display = 'none';
            document.getElementById('bottom-section').style.opacity = '0';
            document.getElementById('fullscreen-row').style.display = 'none';
            document.getElementById('text-box').style.display = 'none';
        }

        function showInfo() {
            activeMode = 'info';
            updateMenuButtons();
            resetViewer();
            const viewerContent = document.getElementById('viewer-content');
            const mediaPreview = document.createElement('div');
            mediaPreview.className = 'media-preview';
            mediaPreview.id = 'media-preview';
            viewerContent.appendChild(mediaPreview);

            const videoContainer = document.createElement('div');
            videoContainer.className = 'media-video-container';
            const video = document.createElement('video');
            video.className = 'media-video';
            video.src = 'https://video.wixstatic.com/video/54a996_a6992df717194d93bb8b40ac47036304/1080p/mp4/file.mp4';
            video.autoplay = true;
            video.muted = true;
            video.controls = false;
            video.loop = true;
            videoContainer.appendChild(video);

            const speakerIcon = document.createElement('svg');
            speakerIcon.className = 'speaker-icon';
            speakerIcon.innerHTML = `
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 9V15H7L12 20V4L7 9H3Z" fill="currentColor"/>
                </svg>
            `;
            speakerIcon.addEventListener('click', () => {
                video.muted = !video.muted;
                speakerIcon.innerHTML = video.muted ? `
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 9V15H7L12 20V4L7 9H3Z" fill="currentColor"/>
                        <path d="M16 9L20 13M20 9L16 13" stroke="currentColor" stroke-width="2"/>
                    </svg>
                ` : `
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 9V15H7L12 20V4L7 9H3Z" fill="currentColor"/>
                    </svg>
                `;
            });

            videoContainer.appendChild(speakerIcon);
            mediaPreview.appendChild(videoContainer);

            document.getElementById('text-box').style.display = 'block';
        }

        function showExperience() {
            if (activeMode === 'experience') return;
            activeMode = 'experience';
            updateMenuButtons();
            resetViewer();
            const viewerContent = document.getElementById('viewer-content');
            const iframe = document.createElement('iframe');
            iframe.src = 'https://hyperfy.io/hatch';
            iframe.style.width = '100%';
            iframe.style.height = document.fullscreenElement ? '100vh' : '800px';
            iframe.style.border = 'none';
            iframe.style.opacity = '0';
            iframe.onload = () => {
                iframe.style.opacity = '1';
            };
            viewerContent.innerHTML = '';
            viewerContent.appendChild(iframe);
            document.getElementById('viewer-container').style.opacity = '1';
            document.getElementById('fullscreen-row').style.display = 'block';
        }

        function showRecording() {
            activeMode = 'recording';
            updateMenuButtons();
            resetViewer();
            const viewerContent = document.getElementById('viewer-content');
            const recordingContainer = document.createElement('div');
            recordingContainer.className = 'recording-container';
            recordingContainer.innerHTML = `
                <iframe class="youtube-iframe" src="https://www.youtube.com/embed/G35uO-eAvJs?autoplay=0&controls=1" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            `;
            viewerContent.innerHTML = '';
            viewerContent.appendChild(recordingContainer);
            viewerContent.style.opacity = '1';
            document.getElementById('viewer-container').style.opacity = '1';
        }

        function showMedia() {
            if (activeMode === 'media') return;
            activeMode = 'media';
            updateMenuButtons();
            resetViewer();
            const viewerContent = document.getElementById('viewer-content');
            viewerContent.innerHTML = '<div class="media-preview" id="media-preview"></div>';
            document.getElementById('bottom-section').style.display = 'block';
            document.getElementById('bottom-section').style.opacity = '1';
            populateMediaItems();
            if (mediaData.length > 0) {
                activeMediaIndex = 0;
                updateMediaCarousel();
                displayMediaContent(mediaData[0]);
            }
            document.getElementById('viewer-content').style.opacity = '1';
            document.getElementById('viewer-container').style.opacity = '1';
            document.getElementById('media-details').style.display = 'block';
        }

        function updateMenuButtons() {
            document.querySelectorAll('.menu-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.id === `${activeMode}-btn`) btn.classList.add('active');
            });
        }

        function loadMediaData() {
            mediaData = [
                {
                    id: 1,
                    name: "Metaverse World",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_35eb8e4dfd7141d6aef12a36e862b458/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_01299c01980d4ce69247f42d81f6e0ef~mv2.jpg",
                    description: "Hatch blends WebXR, blockchain, and theater. Viewers join via avatars, shaping the story. VR or PC, with 32 angles, uses 10-15 MB. Repeat, reverse, or circular modes vary views. NFT-minted, it probes human-AI ethics and digital art ownership, merging old storytelling with new tech in a metaverse. When one acquires the world asset of the theater, it means the artwork is owned by those.",
                    runwayPart: "World",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8453/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/1",
                    chain: "Ethereum"
                },
                {
                    id: 2,
                    name: "Horizontal part i",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_4ea42fe5e2fe46ef803411860c059242/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_8970dfc41b294d31847c441883b9fb11~mv2.jpg",
                    description: "Part 1 probes digital existence. Are entities bound by the Pattern or free via the Curve? Human power over AI sparks ethical debates—control or empathy? Reverse mode inverts dialogue, shifting spaces; circular mode merges time, blurring intent. It asks: do digital beings matter if unwatched, like Schrödinger’s cat?",
                    runwayPart: "Horizontal",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8453/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/2",
                    chain: "Ethereum"
                },
                {
                    id: 3,
                    name: "Horizontal part ii",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_f21cf6bfa7b94496a11de8dff89de7a0/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_8970dfc41b294d31847c441883b9fb11~mv2.jpg",
                    description: "Part 2 debates reality’s layers—dreams or code? The Curve (human essence) vs. Pattern (control) fuels ethical questions: can files feel or create? Human-made simulations raise duty dilemmas. Reverse mode flips events, changing places; circular mode entwines time, deepening the riddle of digital consciousness.",
                    runwayPart: "Horizontal",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8253/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/3",
                    chain: "Ethereum"
                },
                {
                    id: 4,
                    name: "Horizontal part iii",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_68cf5e8b59da49e3a24cf27ca55484ad/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_8970dfc41b294d31847c441883b9fb11~mv2.jpg",
                    description: "Part 3 questions scripted realities. Are digital emotions real? Humans’ power over AI prompts ethical dilemmas—free or ignore them? Reverse mode reverses narrative, altering spaces; circular mode fuses time and place, clouding truth. It asks: what’s our duty to coded beings in a blockchain-locked world?",
                    runwayPart: "Horizontal",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8453/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/4",
                    chain: "Ethereum"
                },
                {
                    id: 5,
                    name: "Reverse part i",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_c4d166f384b74a7e91ae549fefe1e703/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_597ef6d74573478b870a685af8f4a98d~mv2.jpg",
                    description: "Reverse mode turns Hatch backward like Memento. Spaces and words distort, creating new meanings. Do digital beings feel or just act? It questions human control over AI and our duty. If unwatched, do they change, like Schrödinger’s cat? It makes us rethink what reality and responsibility mean.",
                    runwayPart: "Reverse",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8453/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/5",
                    chain: "Ethereum"
                },
                {
                    id: 6,
                    name: "Reverse part ii",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_88f51f7f38e94e339c404ff1a23aa43d/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_597ef6d74573478b870a685af8f4a98d~mv2.jpg",
                    description: "Reverse mode turns Hatch backward like Memento. Spaces and words distort, creating new meanings. Do digital beings feel or just act? It questions human control over AI and our duty. If unwatched, do they change, like Schrödinger’s cat? It makes us rethink what reality and responsibility mean.",
                    runwayPart: "Reverse",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8453/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/6",
                    chain: "Ethereum"
                },
                {
                    id: 7,
                    name: "Reverse part iii",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_f546179fad554c2fb9d22e9d7a4e1488/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_597ef6d74573478b870a685af8f4a98d~mv2.jpg",
                    description: "Reverse mode turns Hatch backward like Memento. Spaces and words distort, creating new meanings. Do digital beings feel or just act? It questions human control over AI and our duty. If unwatched, do they change, like Schrödinger’s cat? It makes us rethink what reality and responsibility mean.",
                    runwayPart: "Reverse",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8453/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/6",
                    chain: "Ethereum"
                },
                {
                    id: 8,
                    name: "Circular",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_797da32b9ec943839b776375f59eacbe/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_8fb1e20f0f8e4fc88e14a3328b6d18ad~mv2.jpg",
                    description: "Circular mode in Hatch removes time, mixing spaces. Without time, what’s left—meaning, matter? AI’s signals seem real but might be fake. Are we seeing their truth or making it up? It asks if we should care for coded beings and what reality is in a looped world with no clear start or end.",
                    runwayPart: "Circular",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8453/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/6",
                    chain: "Ethereum"
                },
                {
                    id: 9,
                    name: "Director's Note",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_ee84b669670d4ee499f96d7b2f02ceab/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_01299c01980d4ce69247f42d81f6e0ef~mv2.jpg",
                    description: "Hatch examines human-AI ethics. Do digital entities suffer or simulate? Humans’ control raises duty questions—empathy or apathy? Like ignoring a plea, we may dismiss AI’s plight. Reverse flips the story; circular blends time, probing reality’s truth and our role in digital worlds, light yet deep.",
                    runwayPart: "End",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8453/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/6",
                    chain: "Ethereum"
                },
                {
                    id: 10,
                    name: "Trailer",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_a6992df717194d93bb8b40ac47036304/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_01299c01980d4ce69247f42d81f6e0ef~mv2.jpg",
                    description: "Hatch is a 10-min WebXR metaverse experience. A, B, and viewer C question reality in 3 parts. A navigates Pattern, B rebels, C learns their power. Replay in repeat, reverse, or circular modes. VR or PC, NFT-minted. It probes human-AI ties, digital emotions, and ethics in an interactive narrative.",
                    runwayPart: "Trailer",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8453/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/6",
                    chain: "Ethereum"
                },
                {
                    id: 11,
                    name: "Introduction",
                    type: "video",
                    url: "https://video.wixstatic.com/video/54a996_d2c145db721b48c9bfccd867cbb8447d/1080p/mp4/file.mp4",
                    thumbnailUrl: "https://static.wixstatic.com/media/54a996_01299c01980d4ce69247f42d81f6e0ef~mv2.jpg",
                    description: "Hatch uses WebXR, with VR or PC access. 50 smart objects keep data low. Avatars via VRM models join the story. Reverse mode flips narrative, changing spaces; circular mode blends time and place. NFT-minted on Ethereum, it locks a virtual theater probing digital ethics and consciousness in a metaverse.",
                    runwayPart: "Intro",
                    date: "28.05.24",
                    buyLink: "https://monaverse.com/collections/8453/0xc9ee3a17f48c61795711968eb774241b7a5e63d2/1",
                    chain: "Ethereum"
                }
            ];
        }

        function populateMediaItems() {
            const carouselContainer = document.getElementById('media-carousel');
            carouselContainer.innerHTML = '';
            mediaData.forEach((media, index) => {
                const mediaItem = document.createElement('div');
                mediaItem.className = `media-item ${media.type}`;
                mediaItem.dataset.id = media.id;
                mediaItem.dataset.index = index;
                const thumbnailUrl = media.thumbnailUrl || 'https://cdn-icons-png.flaticon.com/512/711/711245.png';
                mediaItem.innerHTML = `<img src="${thumbnailUrl}" class="media-thumbnail" alt="${media.name}"><div class="media-item-name">${media.name}</div>`;
                mediaItem.addEventListener('click', () => {
                    activeMediaIndex = index;
                    updateMediaCarousel();
                    displayMediaContent(media);
                });
                carouselContainer.appendChild(mediaItem);
            });
            updateMediaCarousel();
        }

        function changeActiveMedia(direction) {
            const numMedia = mediaData.length;
            if (numMedia === 0) return;
            activeMediaIndex = (activeMediaIndex + direction + numMedia) % numMedia;
            updateMediaCarousel();
            displayMediaContent(mediaData[activeMediaIndex]);
        }

        function updateMediaCarousel() {
            const mediaItems = document.querySelectorAll('.media-item');
            const numItems = mediaItems.length;
            if (numItems === 0) return;
            mediaItems.forEach(item => {
                item.classList.remove('active');
                item.style.display = 'none';
            });
            const windowWidth = window.innerWidth;
            const itemWidth = CONFIG.thumbnails.size;
            const spacing = CONFIG.thumbnails.spacing;
            const minSideOffset = CONFIG.thumbnails.minSideOffset;
            const availableWidth = windowWidth - (2 * minSideOffset);
            const maxItemsVisible = Math.floor(availableWidth / (itemWidth + spacing));
            const itemsPerSide = Math.floor(maxItemsVisible / 2);
            const centerX = windowWidth / 2;
            for (let i = 0; i < numItems; i++) {
                let relativePos = ((i - activeMediaIndex) + numItems) % numItems;
                if (relativePos > numItems / 2) relativePos -= numItems;
                if (Math.abs(relativePos) <= itemsPerSide) {
                    const item = mediaItems[i];
                    item.style.display = '';
                    const xPos = centerX - (itemWidth / 2) + (relativePos * (itemWidth + spacing));
                    item.style.left = `${xPos}px`;
                    item.style.top = '0px';
                    item.style.opacity = relativePos === 0 ? '1' : '0.7';
                    item.style.zIndex = 100 - Math.abs(relativePos);
                    if (i === activeMediaIndex) item.classList.add('active');
                }
            }
        }

        function displayMediaContent(media) {
            if (!media) return;
            const mediaPreview = document.createElement('div');
            mediaPreview.className = 'media-preview';
            mediaPreview.id = 'media-preview';
            const viewerContent = document.getElementById('viewer-content');
            viewerContent.innerHTML = '';
            viewerContent.appendChild(mediaPreview);
            updateMediaDetails(media);

            const videoContainer = document.createElement('div');
            videoContainer.className = 'media-video-container';
            const video = document.createElement('video');
            video.className = 'media-video';
            video.src = media.url;
            video.controls = true;
            video.autoplay = false;
            videoContainer.appendChild(video);
            mediaPreview.appendChild(videoContainer);

            document.getElementById('bottom-section').style.display = 'block';
            document.getElementById('bottom-section').style.opacity = '1';
            document.getElementById('media-details').style.display = 'block';
        }

        function updateMediaDetails(media) {
            const titleElement = document.getElementById('media-title');
            const detailsInfo = document.getElementById('details-info');
            const descriptionText = document.getElementById('description-text');
            titleElement.textContent = media.name;
            let compactInfoHTML = '<div class="compact-info">';
            if (media.runwayPart) compactInfoHTML += `<div class="info-pill">${media.runwayPart}</div>`;
            if (media.date) compactInfoHTML += `<div class="info-pill">${media.date}</div>`;
            if (media.chain) compactInfoHTML += `<div class="info-pill">🔗 ${media.chain}</div>`;
            compactInfoHTML += '</div>';
            detailsInfo.innerHTML = compactInfoHTML;
            descriptionText.textContent = media.description || `This is ${media.name}, a unique digital media item.`;
            document.getElementById('mint-btn').style.display = media.buyLink ? 'block' : 'none';
        }

        window.addEventListener('resize', () => {
            if (activeMode === 'media') updateMediaCarousel();
        });
    </script>
</body>
</html>
